# Hull Tactical Competition

This pipeline trains a predictive model for daily market excess returns, converts predictions into portfolio allocations under volatility constraints, and produces a final submission file for the Hull Tactical competition.

This repository contains two parts:
1. Model to predict daily forward excess returns.
2. Allocation mapping, backtesting, and final submission generation.


## Setup

```bash
pip install -r requirements.txt
```

Requirements:
```
pandas
numpy
scikit-learn
matplotlib
pyarrow
```

Input data:
```
data/train.csv
data/test.csv
```


## Part 1: Model (Feature Engineering, Training, Prediction)

Features:
- Lagged returns: 1, 2, 3, 5 days
- Rolling means: 5, 10, 20 days

Models:
- Ridge Regression (baseline)
- HistGradientBoostingRegressor (nonlinear)

Evaluation:
- TimeSeriesSplit (no leakage)
- Metrics: IC and RMSE

Prediction output format:
```
date_id,predicted_forward_returns
...
```

These predictions are used in the backtesting step.


## Part 2: Backtesting and Submission

### 1. Generate OOF and Test Predictions
```bash
python -m src.make_baseline_preds_cli \
  --train data/train.csv \
  --test data/test.csv \
  --oof_out data/pred_train.parquet \
  --test_out data/preds_test.parquet
```

### 2. Run Backtest on Training Period
```bash
python -m src.backtest_cli \
  --train data/train.csv \
  --preds data/pred_train.parquet \
  --out outputs
```

### 3. Create Submission File
```bash
python -m src.submit_cli \
  --train data/train.csv \
  --test data/test.csv \
  --preds_test data/preds_test.parquet \
  --out outputs/submission.csv
```

Final output format:
```
date_id,allocation
...
```


## Requirements to Satisfy

- Allocation values must remain within `[0, 2]`.
- Portfolio volatility must not exceed `1.2x` benchmark volatility.
- Submit `outputs/submission.csv` for evaluation.


## Credits

- **Backtesting and Allocation Framework:** Alvaro Balbin  
- **Model Development and Feature Engineering:** Aung Kaung  
- **README Assembly:** Generated by GenAI
